(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70769381"],{"1d57":function(e,t,i){},"41d7":function(e,t,i){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,i){var n=i("1d80"),r=i("5899"),a="["+r+"]",s=RegExp("^"+a+a+"*"),o=RegExp(a+a+"*$"),c=function(e){return function(t){var i=String(n(t));return 1&e&&(i=i.replace(s,"")),2&e&&(i=i.replace(o,"")),i}};e.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(e,t,i){var n=i("861d"),r=i("d2bb");e.exports=function(e,t,i){var a,s;return r&&"function"==typeof(a=t.constructor)&&a!==i&&n(s=a.prototype)&&s!==i.prototype&&r(e,s),e}},"81ed":function(e,t,i){},"99af":function(e,t,i){"use strict";var n=i("23e7"),r=i("d039"),a=i("e8b5"),s=i("861d"),o=i("7b0b"),c=i("50c4"),u=i("8418"),l=i("65f0"),m=i("1dde"),d=i("b622"),f=i("2d00"),h=d("isConcatSpreadable"),v=9007199254740991,p="Maximum allowed index exceeded",g=f>=51||!r((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),b=m("concat"),w=function(e){if(!s(e))return!1;var t=e[h];return void 0!==t?!!t:a(e)},T=!g||!b;n({target:"Array",proto:!0,forced:T},{concat:function(e){var t,i,n,r,a,s=o(this),m=l(s,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(a=-1===t?s:arguments[t],w(a)){if(r=c(a.length),d+r>v)throw TypeError(p);for(i=0;i<r;i++,d++)i in a&&u(m,d,a[i])}else{if(d>=v)throw TypeError(p);u(m,d++,a)}return m.length=d,m}})},"9feb":function(e,t,i){"use strict";var n=i("1d57"),r=i.n(n);r.a},a9e3:function(e,t,i){"use strict";var n=i("83ab"),r=i("da84"),a=i("94ca"),s=i("6eeb"),o=i("5135"),c=i("c6b6"),u=i("7156"),l=i("c04e"),m=i("d039"),d=i("7c73"),f=i("241c").f,h=i("06cf").f,v=i("9bf2").f,p=i("58a8").trim,g="Number",b=r[g],w=b.prototype,T=c(d(w))==g,_=function(e){var t,i,n,r,a,s,o,c,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=p(u),t=u.charCodeAt(0),43===t||45===t){if(i=u.charCodeAt(2),88===i||120===i)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(a=u.slice(2),s=a.length,o=0;o<s;o++)if(c=a.charCodeAt(o),c<48||c>r)return NaN;return parseInt(a,n)}return+u};if(a(g,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var C,y=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof y&&(T?m((function(){w.valueOf.call(i)})):c(i)!=g)?u(new b(_(t)),i,y):_(t)},x=n?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;x.length>I;I++)o(b,C=x[I])&&!o(y,C)&&v(y,C,h(b,C));y.prototype=w,w.constructor=y,s(r,g,y)}},b0c0:function(e,t,i){var n=i("83ab"),r=i("9bf2").f,a=Function.prototype,s=a.toString,o=/^\s*function ([^ (]*)/,c="name";n&&!(c in a)&&r(a,c,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},c15b:function(e,t,i){"use strict";var n=i("81ed"),r=i.n(n);r.a},c165:function(e,t,i){"use strict";var n=i("41d7"),r=i.n(n);r.a},c66d:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("h1",{staticClass:"row display-5 text-info text-center"},[e._v(" Good to see you "+e._s(e.user.username)+" ")]),i("h1",{staticClass:"row display-5 text-info text-center"},[e._v(" Current time "+e._s(e.presentTime)+" ")]),i("hr"),i("button",{staticClass:"btn btn-info btn-lg",on:{click:e.createTimer}},[e._v("Create Daily Timer "),i("i",{staticClass:"fas fa-stopwatch"})]),e.timers?i("timer-grid",{attrs:{timers:e.timers}}):e._e()],1)},r=[],a=(i("99af"),i("fb6a"),i("96cf"),i("1da1")),s=i("5530"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition-group",{staticClass:"row",attrs:{tag:"div","enter-active-class":"animate__animated animate__jackInTheBox","leave-active-class":"animate__animated animate__bounceOut"}},e._l(e.timers,(function(e){return i("timer",{key:e._id,staticClass:"col-12 col-md-6 col-lg-4 p-0",attrs:{timer:e}})})),1)},c=[],u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-4"},[i("div",{staticClass:"mx-1 my-2 rounded py-2",class:[{"timer-on":e.timer.enabled},{"timer-off":!e.timer.enabled},{"timer-edit":e.editMode}]},[i("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut",mode:"out-in"}},[e.editMode?i("timer-edit",{attrs:{timer:e.timer,updateTimer:e.updateTimer,removeTimer:e.removeTimer},on:{exitEditMode:e.resume}}):i("timer-display",{attrs:{timer:e.timer,showTimer:e.showTimer,timeRemainingInSeconds:e.timeRemaining,updateTimer:e.updateTimer},on:{enable:e.activateTimer,disable:e.stopTimer,enterEditMode:e.edit}})],1)],1)])},l=[],m=(i("b0c0"),i("a9e3"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mx-4 py-0"},[i("h4",{staticClass:"row"},[e._v(" "+e._s(e.timer.name)+" ")]),i("div",{staticClass:"row "},[i("div",{staticClass:"col-9"},[i("div",{staticClass:"row justify-content-center"},[e._v(" From "),i("div",{staticClass:"settings"},[e._v(e._s(e.timer.start))]),e._v(" To "),i("div",{staticClass:"settings"},[e._v(e._s(e.timer.end))]),e._v(" Every "),i("div",{staticClass:"settings"},[e._v(e._s(e.timer.period))]),e._v(" min ")]),e.showTimer?i("h2",{staticClass:"row p-1 justify-content-center align-self-center"},[e._v(" "+e._s(e.displayTimeRemaining)+" ")]):e._e(),!e.showTimer&&e.timer.enabled?i("h4",{staticClass:"row p-2 justify-content-center align-self-center"},[e._v(" "+e._s(e.statusMessage)+" ")]):e._e(),e.timer.enabled?e._e():i("h2",{staticClass:"row p-2 justify-content-center align-self-center"},[i("i",{staticClass:"fas fa-ban"})])]),i("div",{staticClass:"col-3 pr-0"},[i("button",{staticClass:" row btn btn-sm btn-warning text-light m-0 mb-2 btn-block",on:{click:function(t){return e.$emit("enterEditMode")}}},[i("i",{staticClass:"fas fa-edit"})]),i("div",{staticClass:"onoffswitch"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.enabled,expression:"enabled"}],staticClass:"onoffswitch-checkbox",attrs:{type:"checkbox",name:"onoffswitch",id:"myonoffswitch"+e.timer._id,tabindex:"0"},domProps:{checked:Array.isArray(e.enabled)?e._i(e.enabled,null)>-1:e.enabled},on:{change:function(t){var i=e.enabled,n=t.target,r=!!n.checked;if(Array.isArray(i)){var a=null,s=e._i(i,a);n.checked?s<0&&(e.enabled=i.concat([a])):s>-1&&(e.enabled=i.slice(0,s).concat(i.slice(s+1)))}else e.enabled=r}}}),i("label",{staticClass:"onoffswitch-label",attrs:{for:"myonoffswitch"+e.timer._id}},[i("span",{staticClass:"onoffswitch-inner"})])])])])])}),d=[],f={props:["timer","showTimer","timeRemainingInSeconds","index","updateTimer"],data:function(){return{enabled:!0}},computed:{displayTimeRemaining:function(){var e=Math.floor(this.timeRemainingInSeconds/60),t=("0"+this.timeRemainingInSeconds%60).slice(-2);return"".concat(e," : ").concat(t)},statusMessage:function(){return this.timer.enabled?"I'll start at ".concat(this.timer.start):""}},watch:{enabled:function(e,t){console.log("New Value: "+e),console.log("Old Value: "+t),this.updateTimer({enabled:e},t,e)}},created:function(){console.log("Created TimerDisplay"),this.enabled=this.timer.enabled}},h=f,v=(i("c165"),i("2877")),p=Object(v["a"])(h,m,d,!1,null,"e434af62",null),g=p.exports,b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"px-2 mx-lg-2",staticStyle:{overflow:"hidden"}},[i("h3",{staticClass:"py-0",staticStyle:{display:"flex"}},[i("span",{staticClass:"mr-3",staticStyle:{flex:"2"}},[e._v("Label: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],staticClass:"timerNameInput",staticStyle:{overflow:"visible"},attrs:{placeholder:"timer name...",type:"text"},domProps:{value:e.newName},on:{input:function(t){t.target.composing||(e.newName=t.target.value)}}})]),i("div",{staticClass:"form-group my-0"},[i("div",{staticClass:"row justify-content-between mb-2"},[e._m(0),i("div",{staticClass:"col-sm-8 col-lg-6"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.newStartTime,expression:"newStartTime"}],staticClass:"form-control",attrs:{type:"time",placeholder:"Select time"},domProps:{value:e.newStartTime},on:{input:function(t){t.target.composing||(e.newStartTime=t.target.value)}}})])]),i("div",{staticClass:"row justify-content-between mb-2"},[e._m(1),i("div",{staticClass:"col-sm-8 col-lg-6"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.newEndTime,expression:"newEndTime"}],staticClass:"form-control",attrs:{type:"time",placeholder:"Select time"},domProps:{value:e.newEndTime},on:{input:function(t){t.target.composing||(e.newEndTime=t.target.value)}}})])]),i("div",{staticClass:"row justify-content-between mb-2"},[e._m(2),i("div",{staticClass:"col-6 col-sm-4"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.newPeriod,expression:"newPeriod"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"59"},domProps:{value:e.newPeriod},on:{input:function(t){t.target.composing||(e.newPeriod=t.target.value)}}})])])]),i("div",{staticClass:"mt-0 mt-lg-2"},[i("button",{staticClass:"btn btn-info",on:{click:function(t){return e.$emit("exitEditMode")}}},[i("i",{staticClass:"fas fa-arrow-left"})]),i("div",{staticClass:"float-right"},[i("button",{staticClass:"btn btn-success mr-1",on:{click:function(t){return e.updateTimer(e.editedTimer)}}},[i("i",{staticClass:"fas fa-save"})]),i("button",{staticClass:"btn btn-danger",on:{click:e.removeTimer}},[i("i",{staticClass:"fas fa-trash-alt"})])])])])},w=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-sm-4 col-lg-6"},[i("label",[e._v("At: ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-sm-4 col-lg-6"},[i("label",[e._v("To: ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-6 col-sm-8"},[i("label",[e._v("Every (min):")])])}],T={props:["timer","updateTimer","removeTimer"],data:function(){return{newStartTime:"",newEndTime:"",newPeriod:1,newName:"",newType:"Yes"}},computed:{editedTimer:function(){return{start:this.newStartTime,end:this.newEndTime,period:Number(this.newPeriod),name:this.newName,enabled:this.timer.enabled}}},methods:{},created:function(){console.log("Created TimerEdit"),this.newStartTime=this.timer.start,this.newEndTime=this.timer.end,this.newPeriod=this.timer.period,this.newName=this.timer.name}},_=T,C=(i("c15b"),Object(v["a"])(_,b,w,!1,null,"8fb34c4e",null)),y=C.exports,x=i("2f62"),I={props:["timer"],components:{TimerDisplay:g,TimerEdit:y},data:function(){return{timeRemaining:1,editMode:!1,showTimer:!1,intervalID:"",timeoutID:"",alarm:new Audio(i("eea6"))}},computed:{startBound:function(){return{hour:Number(this.timer.start.substring(0,2)),minutes:Number(this.timer.start.substring(3,5))}},endBound:function(){return{hour:Number(this.timer.end.substring(0,2)),minutes:Number(this.timer.end.substring(3,5))}}},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(x["c"])(["isNew"])),Object(x["b"])(["getTimers","update","remove"])),{},{updateTimer:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.update({id:t.timer._id,timer:e});case 2:if(n=i.sent,!n.data.success){i.next=8;break}return t.editMode=!1,i.next=7,t.getTimers();case 7:t.timer.enabled?t.activateTimer():t.stopTimer();case 8:case"end":return i.stop()}}),i)})))()},removeTimer:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.remove(e.timer._id);case 2:return t.next=4,e.getTimers();case 4:case"end":return t.stop()}}),t)})))()},beginTimer:function(){var e=this,t=new Date;this.showTimer=!0;var i=S(t,this.startBound,this.endBound,Number(this.timer.period));this.timeRemaining=E(t,i),console.log(this.timeRemaining),this.intervalID=setInterval((function(){e.timeRemaining--,0==e.timeRemaining&&(e.playAudio(),e.activateTimer())}),1e3)},stopTimer:function(){this.showTimer=!1,clearInterval(this.intervalID),clearTimeout(this.timeoutID),console.log("Stopped Timer")},edit:function(){this.editMode=!0,this.stopTimer()},resume:function(){this.editMode=!1,this.timer.enabled&&this.activateTimer()},activateTimer:function(){clearInterval(this.intervalID),clearTimeout(this.timeoutID),console.log("activateTimer - enabled: "+this.timer.enabled);var e=new Date;N(e,this.startBound,this.endBound)?(this.beginTimer(),console.log("automatic begin!")):(console.log("made a future timer call"),this.futureTimerCall())},futureTimerCall:function(){var e=this,t=new Date;this.showTimer=!1;var i=M(this.startBound.hour,this.startBound.minutes)-M(t.getHours(),t.getMinutes());(this.startBound.hour<t.getHours()||this.startBound.hour==t.getHours()&&this.startBound.minutes<=t.getMinutes())&&(i+=1440);var n=60*i-t.getSeconds();console.log("Waiting for: "+n),this.timeoutID=setTimeout((function(){e.beginTimer()}),1e3*n)},playAudio:function(){var e=this;this.alarm.muted=!1,this.alarm.play(),this.alarm.onended=function(){var t=new SpeechSynthesisUtterance(e.timer.name);window.speechSynthesis.speak(t)}}}),created:function(){this.timer.enabled&&this.activateTimer(),this.editMode=this.isNew()(this.timer._id),console.log("Created Timer"),console.log("New Timer: "+this.isNew()(this.timer._id))},beforeDestroy:function(){clearInterval(this.intervalID),clearTimeout(this.timeoutID)}};function N(e,t,i){return!(e.getHours()<t.hour||e.getHours()>i.hour)&&(!(e.getHours()==t.hour&&e.getMinutes()<t.minutes)&&!(e.getHours()==i.hour&&e.getMinutes()>=i.minutes))}function E(e,t){var i=t.startPoint,n=t.endPoint,r=N;if(r(e,i,n)){console.log("============================================="),console.log("found Interval"),console.log("endPoint.hour: "+n.hour),console.log("endPoint.minutes: "+n.minutes),console.log("date.getHours(): "+e.getHours()),console.log("date.minutes(): "+e.getMinutes());var a=60*n.hour+n.minutes-(60*e.getHours()+e.getMinutes());return 60*a-e.getSeconds()}}function S(e,t,i,n){var r={},a={},s=60*e.getHours()+e.getMinutes(),o=60*t.hour+t.minutes,c=60*i.hour+i.minutes,u=s-o,l=Math.floor(u/n)*n+o;r.hour=Math.floor(l/60),r.minutes=l%60;var m=l+n;return m>c&&(m=c),a.hour=Math.floor(m/60),a.minutes=m%60,{startPoint:r,endPoint:a}}function M(e,t){return 60*e+t}var j=I,O=(i("9feb"),Object(v["a"])(j,u,l,!1,null,"e995cae6",null)),A=O.exports,R={props:["timers"],components:{Timer:A}},k=R,P=Object(v["a"])(k,o,c,!1,null,null,null),D=P.exports,H={name:"App",components:{TimerGrid:D},data:function(){return{now:""}},methods:Object(s["a"])(Object(s["a"])({},Object(x["b"])(["getProfile","getTimers","create"])),{},{setPresentTime:function(){var e=this;this.now=new Date,setInterval((function(){e.now=new Date}),1e3)},createTimer:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="".concat(e.nowHours,":").concat(e.nowMinutes),t.next=3,e.create(i);case 3:return t.next=5,e.getTimers();case 5:case"end":return t.stop()}}),t)})))()}}),computed:Object(s["a"])(Object(s["a"])({},Object(x["c"])(["user","timers"])),{},{nowHours:function(){return("0"+this.now.getHours()%60).slice(-2)},nowMinutes:function(){return("0"+this.now.getMinutes()%60).slice(-2)},nowSeconds:function(){return("0"+this.now.getSeconds()%60).slice(-2)},presentTime:function(){return"".concat(this.nowHours," : ").concat(this.nowMinutes," : ").concat(this.nowSeconds)}}),created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setPresentTime(),t.next=3,e.getProfile();case 3:return t.next=5,e.getTimers();case 5:case"end":return t.stop()}}),t)})))()}},B=H,$=Object(v["a"])(B,n,r,!1,null,null,null);t["default"]=$.exports},eea6:function(e,t,i){e.exports=i.p+"media/harp-strumming-short.c49681ec.mp3"},fb6a:function(e,t,i){"use strict";var n=i("23e7"),r=i("861d"),a=i("e8b5"),s=i("23cb"),o=i("50c4"),c=i("fc6a"),u=i("8418"),l=i("b622"),m=i("1dde"),d=i("ae40"),f=m("slice"),h=d("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),p=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!f||!h},{slice:function(e,t){var i,n,l,m=c(this),d=o(m.length),f=s(e,d),h=s(void 0===t?d:t,d);if(a(m)&&(i=m.constructor,"function"!=typeof i||i!==Array&&!a(i.prototype)?r(i)&&(i=i[v],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return p.call(m,f,h);for(n=new(void 0===i?Array:i)(g(h-f,0)),l=0;f<h;f++,l++)f in m&&u(n,l,m[f]);return n.length=l,n}})}}]);
//# sourceMappingURL=chunk-70769381.a9f4bd6d.js.map